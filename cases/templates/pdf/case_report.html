{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Case Report: {{ case.complaint_id }}</title>
    <style>


        /* PDF Layout Reset */
        @page { size: A4; margin: 1.5cm 1cm 1cm 1cm; }
        body { font-family: 'Times New Roman', Times, serif; font-size: 13px; margin: 0; padding: 0; color: #111; }
        
        /* Header */
        .report-header { display: flex; align-items: center; justify-content: space-between; border-bottom: 6px solid #0b4187; padding-bottom: 8px; margin-bottom: 12px; }
        .logo-block { display:flex; align-items:center; gap:12px; }
        .logo-block img.logo { height: 100px; width: auto; display:block; }
        .header-text { text-align: right; }
        .dept-name { font-size: 18px; font-weight: 800; color:#0b4187; letter-spacing: .5px; }
        .govt-line { font-size: 11px; color:#555; margin-top:3px; }
        .report-title { font-size: 15px; font-weight:700; margin-top:6px; }

        /* Watermark */
        .watermark { position: fixed; top: 20%; left: 17%; opacity: 0.20; width: 70%; z-index: 0.10; pointer-events: none; }

        /* Content Sections */
        .section { margin-top: 15px; border: 1px solid #ddd; padding: 12px; border-radius: 4px; background: #fff; z-index:1; }
        .section h3 { margin: 0 0 8px 0; color: #0b4187; font-size: 14px; border-bottom: 1px solid #eee; padding-bottom:6px; font-weight: 700; }

        /* Detail Table */
        table.detail-table { width: 100%; border-collapse: collapse; font-size:12px; }
        table.detail-table th, table.detail-table td { padding: 6px 10px; vertical-align: top; border-bottom:1px solid #f0f0f0; }
        table.detail-table th { width: 30%; text-align: left; color: #444; font-weight: bold; }
        
        /* Signatures and Footer */
        .qr-sign-row { display:flex; justify-content:space-between; align-items:flex-end; margin-top:30px; }
        .qr img { width:90px; height:90px; border:1px solid #eee; padding:5px; display:block; }
        .stamp { width:110px; height:110px; border-radius:8px; border:2px dashed #999; display:flex; align-items:center; justify-content:center; font-size:10px; color:#666; text-align:center; }
        .signature-box { width:200px; border-top:1px solid #222; text-align:center; padding-top:8px; font-weight:700; }

        /* Footer and Validation */
        .footer { 
            margin-top:30px; 
            border-top:4px solid #0b4187; 
            padding-top:8px; 
            font-size:11px; 
            color:#444; 
            display:flex; 
            justify-content:space-between; 
            align-items: center; 
        }
        .validation-seal {
            display: flex;
            align-items: center;
            font-weight: bold;
            color: #157347; /* Success Green */
        }
        .validation-seal::before {
            content: '✓'; 
            font-size: 18px;
            color: white;
            background-color: #157347;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 6px;
        }
        .disclaimer {
            font-size: 10px;
            color: #666;
            line-height: 1.2;
            margin-top: 20px;
            border-top: 1px dashed #ccc; /* optional separation line */
            padding-top: 4px;
        }
    </style>
</head>
<body>
    <div class="report-wrapper">
        
        <img class="watermark" src="{{ base_url }}static/img/gov_emblem1.png" alt="Emblem">

        <div class="report-header">
            <div class="logo-block">
                <img class="logo" src="{{ base_url }}static/img/logo2.png" alt="Reunite Logo">
                <div style="font-size: 18px; font-weight: 700; color: #0b4187;">CASE ID: {{ case.complaint_id }}</div>
            </div> 
            <div class="header-text">
                <div class="dept-name">Reunite Missing Persons Bureau</div>
                <div class="govt-line">Government of India &nbsp;•&nbsp; Official Case Document</div>
                <div class="report-title">Missing Person Official Case Report</div>
            </div>
        </div>

        <div class="section">
            <h3>1. Missing Person Details</h3>
            <table class="detail-table">
                <tr>
                    <th>Name:</th><td colspan="3" style="font-weight: bold;">{{ case.missing_name|upper }}</td>
                </tr>
                <tr>
                    <th>Gender:</th><td>{{ case.missing_gender|default:'N/A' }}</td>
                    <th>Age / DOB:</th><td>{{ case.missing_age|default:'N/A' }} / {{ case.missing_dob|date:"Y-m-d"|default:'N/A' }}</td>
                </tr>
                <tr>
                    <th>Height / Weight:</th><td>{{ case.missing_height|default:'N/A' }} / {{ case.missing_weight|default:'N/A' }}</td>
                    <th>Hair / Eye Color:</th><td>{{ case.missing_hair_color|default:'N/A' }} / {{ case.missing_eye_color|default:'N/A' }}</td>
                </tr>
                <tr>
                    <th>Last Known Clothing:</th><td colspan="3">{{ case.clothing_description|default:'Not specified.' }}</td>
                </tr>
                <tr>
                    <th>Special Identifying Marks:</th><td colspan="3">{{ case.special_marks|default:'None' }}</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h3>2. Incident & Location Details</h3>
            <table class="detail-table">
                <tr>
                    <th>Case Status:</th><td style="font-weight:700; color:#d9534f;">{{ case.status|upper }}</td>
                    <th>Urgency Level:</th><td style="font-weight:700;">{{ case.urgency|upper }}</td>
                </tr>
                <tr>
                    <th>Last Seen Location:</th><td colspan="3">{{ case.last_seen_location|default:'Unknown' }}</td>
                </tr>
                <tr>
                    <th>Last Seen Date/Time:</th><td>{{ case.last_seen_date|date:"M d, Y"|default:'N/A' }} at {{ case.last_seen_time|default:'N/A' }}</td>
                    <th>Case Registration Date:</th><td>{{ case.created_at|date:"M d, Y H:i" }}</td>
                </tr>
                <tr>
                    <th>Case Notes:</th><td colspan="3">{{ case.notes|default:'No officer notes recorded.' }}</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h3>3. Complainant / Guardian Details</h3>
            <table class="detail-table">
                <tr>
                    <th>Name:</th><td>{{ case.guardian_name }} ({{ case.guardian_relationship|default:'Guardian' }})</td>
                    <th>Aadhaar:</th><td>{{ case.guardian_aadhaar|default:'N/A' }}</td>
                </tr>
                <tr>
                    <th>Phone:</th><td>{{ case.guardian_phone }}</td>
                    <th>Email:</th><td>{{ case.guardian_email|default:'N/A' }}</td>
                </tr>
                <tr>
                    <th>Address:</th><td colspan="3">{{ case.guardian_address }}</td>
                </tr>
            </table>
        </div>
        
<div class="qr-sign-row" style="display:flex; justify-content:space-between; align-items:flex-end; margin-top:30px;">

    <!-- Left side: Stamp + Signature -->
    <div style="display:flex; flex-direction:column; gap:12px; align-items:flex-start;">
        <div class="stamp" style="margin-left:40px;margin-bottom:10px;width:120px; height:120px; display:flex; flex-direction:column; align-items:center; justify-content:center; font-size:10px; border:2px dashed #999;">
            <img src="{{ base_url }}static/img/stamp.png" alt="Official Stamp" width="100" height="100">
            Official Stamp
        </div>
        <div class="signature-box" style="width:220px; border-top:1px solid #222; text-align:center; padding-top:6px; font-weight:700;">
            Reporting Officer's Signature<br>
            {{ case.police_officer.first_name }} {{ case.police_officer.last_name|default:'[Officer Name]' }}<br>
            Date Issued: {{ now|date:"Y-m-d" }}
        </div>
    </div>

    <!-- Right side: QR Code -->
    <div style="text-align:right;">
        <img src="{{ base_url }}static/img/QR3.png" alt="QR Code" width="100" height="100">
        <div style="font-size:10px; margin-top:4px; ">Scan to Verify Document</div>
    </div>

</div>

        <div class="disclaimer" style="margin-top:20px; font-size:10px; color:#666; line-height:1.3;">
            <strong>Disclaimer:</strong> This document is generated by the Reunite Missing Persons Bureau's official system and is intended solely for official purposes. 
            While every effort is made to ensure the accuracy of the information, the Bureau does not assume responsibility for any errors, omissions, or misinterpretations. 
            The information contained herein is confidential and may not be reproduced, distributed, or used for any unauthorized purposes. 
            Verification from official sources is recommended before taking any action based on this report. 
            Any unauthorized use, copying, or disclosure of this document is strictly prohibited and may be subject to legal action.
        </div>


        <div class="footer">
            <div class="validation-seal">
                Document Authenticated 
            </div>
            <div>Report ID: {{ case.complaint_id }} | Report Status: {{ case.status|upper }}</div>
            <div>Reunite Missing Persons Bureau &nbsp;•&nbsp; This is a system-generated document.</div>
        </div>

    </div>
    
</body>
</html>